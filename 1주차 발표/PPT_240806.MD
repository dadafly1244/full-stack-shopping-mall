---
marp: true
---

# **1주차 발표**

## 설계 (240806) 

by: 양다영

---

# 목차 

* ERD 설계
* 화면 설계

---

# ERD 설계()
## 설계 하면서 배운 부분

---
# 키
* 복합키 : 두개 이상의 칼럼을 묶어서 하나의 기본키로 설정하는 것. 각각은 유일성과 최소성을 만족하지 못할 수 있음. 
    * user table에서 id, user_id, email을 복합키로 설정했었는데, 관리가 어려울 것 같아 id를 기본키로 설정하고 user_id와 email은 unique로 설정해서 중복 체크를 할 예정
---

# 식별관계 vs 비식별관계

* Identifying Relationship : B table의 FK가 자식으로 A table의 PK를 참조한다면 식별관계에서는 B테이블은 A테이블에 종속되어서 A값이 없으면 B값 홀로 의미를 갖지 못하는 관계 
    * 댓글이 삭제가 되면 그 밑의 자식 댓글도 삭제시키고 싶었기 때문에 review의 경우 식별관계로 설정.
* Non-Identifying Relationship: 두 테이블은 서로가 없어도 유효한 정보를 나타낼 수 있음. 
    * 사용자, 상품 등 ( 사용자가 없더라도 상품은 유효한 정보 가지는 관계.)
    * 대부분의 테이블을 비식별관계로 설정.

---
# 정규화
* 제 1 정규화 : 속성 하나에 하나의 속성값만 가져야 함.
    *  대부분의 칼럼의 속성은 하나의 속성값만을 가지도록 설계. 
* 제 2 정규화 : 후보키가 아닌 속성들이 후보키에 대해 완전 함수적 종속인 경우.(부분 함수 종속성을 제거하는 과정)
    현재 테이블의 주제와 관련없는 컬럼을 다른 테이블로 빼는 작업
    * 장바구니 table과 주문 table을 분리해서 주문 table에서 상품정보를 관리하지 않도록 분리. 
    * 사용자 정보 table에서 찜목록(상품정보)를 관리하지 않도록 분리.
* 제 3 정규화 : 기본키를 제외한 속성들 간의 이행 종속성이 없어야 함.
    * 앞의 예시처럼 사업자 번호를 알면 상점이름, 상점설명을 알 수 있음.
    * 상품 table에서 사업자번호, 상점이름, 상점설명을 따로 분리해서 상점 table을 생성.
---
# 역정규화 
* join 줄이기
    * 적용 배경
        - 상품 설명 이미지, 리뷰 이미지의 경우 이미지를 여러장 첨부하는 기능이 필요. 
        - 이미지 db를 따로 두고 join 해서 image path를 찾는 방법 생각. 
        - 그냥 로컬에서 이미지를 저장하고 db에 image path를 관리하는 방식으로 구현 예정
        - join 없이 간편하게 하나의 속성을 배열을 문자열로 변경해서 db에 저장하고 이미지를 여러장을 첨부, 수정, 삭제할 수 있도록 구현 예정. 
            cf) (Json.stringify(), Json.parse()로 변환)
    * 적용 결과 
        * 상품 설명 이미지, 리뷰 이미지의 경우 
        db의 JSON TYPE을 활용하여 저장하도록 설계
